pipeline {
    agent any

    stages {
        stage('Build Laptop') {
            steps {
                // Clean the workspace before starting
                cleanWs()

                // Run shell commands to simulate build
                sh '''
                echo "Building a laptop..."
                mkdir -p build
                echo "start" > build/computer.txt
                // learn : exit code 2 will through error and now allow any step to execute 
                //exit 2 : i commented then code will execute completely
                echo "end" >> build/computer.txt
                cat build/computer.txt
                //rm build/computer.txt : i will not remove file so that below step will find that file and second stage will also suceed.
                '''
            }
        }

        stage('TEST Laptop') {
            steps {
                // Test if the build artifact exists
                sh '''
                test -f build/computer.txt
                echo "File exists!"
                '''
            }
        }
    }

    post {
        success {
            // Archive build artifacts for download/inspection
            archiveArtifacts artifacts: 'build/**'
        }
    }
}

